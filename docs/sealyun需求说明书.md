## sealyun需求说明书



> sealyun主要服务于sealos的软件包，已订阅服务作为基本，用户可以自助通过sealyun进行订阅服务下载对应服务的软件包进行使用。



## 页面模块



### 首页

- **突出展示平台的说明，主要的意义 （感觉不合理可提意见）**

- 订阅服务按钮可正常跳转到服务中心模块。

- Github地址目前跳转到sealos的github

- 导航顺序  未登录：（首页、软件市场、说明文档、评论说明），已登录：（首页、软件市场、服务中心、说明文档、评论说明、用户中心）

- 头像下面三个标题（用户中心、后台管理、退出登录）

  - 后台管理（判断用户角色，如果是普通用户则不显示这个模块）
  - 退出登录后清空session，需要重新登录

  

  



## 用户模块

#### 登录

 目前仅支持github登录，所以user表只要用户一旦登录，自从插入user表数据。读取github的api获取username,emial和avatar_url字段。**邮箱只有创建时会自动同步，已经存在的数据不会修改邮箱。**

- 数据库表 `user` 表
  - name  ()
  - email
  - phone 后台自行维护
  - alipay 预留字段
  - alipay_pwd 预留字段
  - avatar_url 头像
  - site_role  ： 1 普通用户 2 平台管理员 3 文档管理员
  - amount 预留字段

#### 个人中心

仅支持修改 邮箱、手机号、支付宝账号、支付宝体现密码。



## 评论模块



> 这个模块是从以前的系统迁移过来的，正常展示即可。



## 文档模块



### 前台展示

根据后台维护的数据展示数据 

https://market.cuisongliu.com/instructions

https://market.cuisongliu.com/marketctl

### 后台管理

> 对于非普通用户可在后台管理操作文档模块。

数据库： markdown_type,markdown_content

#### 文档管理 【文档类别】

目前内置2类文档usage和marketctl。（针对文档无权限控制）

- 可创建自定义类型（对于无内容的类型可以删除）对于默认（usage和marketctl无法删除）
- 若删除类型确认数据库是否真实删除
- 对接的类别接口 （/api/v2/usage/type/:type）
- 菜单显示： 文档管理 
- 【文档类别】显示标题 （序号、类别路径（提示：对接地址：/api/v2/usage/type/:type）、文档描述，操作【修改】【删除】）
  - 创建、修改、删除 弹窗提示与当前功能模块一致。【新建/创建】文档类别
  - 创建时类别路径不能重复且只能为英文
  - 修改只能改描述，不能改名称
  - 删除和修改都需要二次检查【注意提示信息】
- 点击类型路径进入文档内容模块【注意文案一致性】
  - 【文档管理】-【文档内容】 ？？？

#### 文档内容

> 由文档管理点击进入

- 表格表头 （序号、文档标题、排序、操作【预览/查看、修改，删除】）
- 根据排序字段进行升序排序
- 创建文档需要跟文档类别关联（查看数据库）
- 标题不限制格式，内容支持markdwon
- 弹窗标题注意文本一致性
- 文档字段【文档标题、排序、文档内容】
- 敏感操作需要二次检查
- 头部需要展示对接地址【位置自己看感觉哪里比较合适】（提示：对接地址：/api/v2/usage/content/:id）

